use super::mob::Mobility;
use super::pst::{PstEvalSet, KingRelativePst, Pst};
use super::{Evaluator, EvalTerms};
use super::eval_set::PieceEvalSet;

pub const PIECE_VALUES: PieceEvalSet<i16> = PieceEvalSet {
    pawn: 100,
    knight: 320,
    bishop: 330,
    rook: 500,
    queen: 900,
    king: 0,
};

pub const EVALUATOR: Evaluator = Evaluator {
    midgame: EvalTerms {
        piece_tables: PstEvalSet {
            pawn: KingRelativePst([
                [
                    [   0,    0,    0,    0],
                    [  92,   94,  106,  139],
                    [  51,   81,  112,  116],
                    [  50,   76,   81,   91],
                    [  43,   75,   80,   94],
                    [  43,   70,   74,   82],
                    [  34,   60,   61,   63],
                    [   0,    0,    0,    0],
                ],
                [
                    [   0,    0,    0,    0],
                    [  75,   87,  123,  122],
                    [ 139,  174,  151,  111],
                    [ 104,  116,  112,  110],
                    [  95,  113,  106,  102],
                    [ 105,  130,  107,   96],
                    [  82,  130,  104,   76],
                    [   0,    0,    0,    0],
                ],
            ]),
            knight: KingRelativePst([
                [
                    [ 157,  264,  256,  307],
                    [ 314,  327,  361,  367],
                    [ 311,  350,  381,  387],
                    [ 325,  330,  350,  374],
                    [ 315,  342,  343,  343],
                    [ 305,  326,  331,  335],
                    [ 295,  289,  311,  324],
                    [ 230,  298,  296,  308],
                ],
                [
                    [ 194,  285,  295,  356],
                    [ 344,  324,  396,  355],
                    [ 348,  363,  401,  408],
                    [ 353,  341,  387,  359],
                    [ 333,  352,  353,  352],
                    [ 323,  349,  353,  354],
                    [ 311,  311,  322,  324],
                    [ 283,  306,  312,  311],
                ],
            ]),
            bishop: KingRelativePst([
                [
                    [ 305,  300,  282,  257],
                    [ 312,  357,  335,  317],
                    [ 337,  350,  349,  360],
                    [ 313,  330,  343,  359],
                    [ 329,  330,  333,  354],
                    [ 337,  351,  345,  339],
                    [ 336,  341,  346,  330],
                    [ 329,  350,  333,  326],
                ],
                [
                    [ 312,  312,  301,  277],
                    [ 323,  314,  346,  356],
                    [ 343,  347,  374,  368],
                    [ 321,  328,  351,  352],
                    [ 347,  335,  341,  354],
                    [ 360,  363,  358,  345],
                    [ 343,  358,  351,  338],
                    [ 339,  325,  322,  337],
                ],
            ]),
            rook: KingRelativePst([
                [
                    [ 524,  494,  518,  485],
                    [ 495,  492,  489,  504],
                    [ 475,  496,  483,  494],
                    [ 457,  481,  478,  468],
                    [ 451,  454,  479,  466],
                    [ 464,  474,  465,  470],
                    [ 466,  468,  477,  480],
                    [ 485,  484,  486,  494],
                ],
                [
                    [ 554,  484,  518,  535],
                    [ 559,  541,  535,  526],
                    [ 548,  537,  543,  516],
                    [ 511,  479,  510,  476],
                    [ 481,  496,  477,  480],
                    [ 514,  537,  498,  480],
                    [ 479,  523,  492,  487],
                    [ 488,  494,  495,  501],
                ],
            ]),
            queen: KingRelativePst([
                [
                    [ 856,  855,  875,  897],
                    [ 892,  874,  875,  863],
                    [ 891,  896,  887,  881],
                    [ 879,  888,  883,  881],
                    [ 891,  892,  893,  889],
                    [ 903,  906,  897,  898],
                    [ 904,  894,  902,  906],
                    [ 882,  893,  903,  904],
                ],
                [
                    [ 918,  939,  924,  914],
                    [ 923,  888,  910,  885],
                    [ 919,  936,  907,  910],
                    [ 900,  886,  897,  885],
                    [ 916,  901,  897,  891],
                    [ 922,  926,  918,  900],
                    [ 887,  905,  910,  904],
                    [ 883,  897,  884,  903],
                ],
            ]),
            king: Pst([
                [ -21,   18,   13,  -10,    0,   -8,    7,   -3],
                [  -9,   36,   13,   41,   13,   30,   15,   -2],
                [ -47,   36,   15,    1,   29,   54,   36,   16],
                [ -35,  -20,   -5,  -53, -100,  -18,  -17,  -69],
                [ -30,  -11,  -22,  -95,  -84,  -47,  -58, -117],
                [  23,   55,  -28,  -47,  -30,  -32,   15,  -31],
                [  66,   67,   42,   18,   10,   30,   75,   60],
                [  48,   79,   53,  -20,   39,    7,   74,   68],
            ]),
        },
        mobility: Mobility {
            pawn: [ -12, -5, 5, 35, 1],
            knight: [ -60, -52, -45, -41, -38, -39, -39, -39, -36],
            bishop: [ -64, -58, -51, -48, -42, -35, -30, -27, -25, -24, -23, -18, 9, 18],
            rook: [ -131, -124, -120, -117, -117, -113, -110, -107, -105, -104, -102, -100, -99, -90, -96],
            queen: [ -20, -38, -51, -49, -50, -48, -43, -44, -44, -41, -42, -43, -42, -40, -40, -36, -37, -37, -39, -32, -12, -20, -18, -10, 1, 20, -18, 29],
            king: [ 10, 12, 4, -6, -17, -36, -41, -55, -59],
        },
        passed_pawns: KingRelativePst([
            [
                [   0,    0,    0,    0],
                [   3,   37,   45,   36],
                [  36,   32,   37,    9],
                [  34,   20,   26,   13],
                [  23,    3,  -18,  -12],
                [   6,   -8,  -20,  -17],
                [   1,    4,  -17,  -27],
                [   0,    0,    0,    0],
            ],
            [
                [   0,    0,    0,    0],
                [ -15,  -17,   -2,   12],
                [ -81,  -54,    1,   27],
                [ -25,   -3,    7,    0],
                [ -46,  -22,  -13,  -16],
                [ -11,    2,  -19,  -26],
                [ -13,    5,   -8,   10],
                [   0,    0,    0,    0],
            ],
        ]),
        bishop_pair: 20,
        rook_on_open_file: 31,
        rook_on_semiopen_file: 12,
    },
    endgame: EvalTerms {
        piece_tables: PstEvalSet {
            pawn: KingRelativePst([
                [
                    [   0,    0,    0,    0],
                    [ 202,  192,  154,  148],
                    [ 108,  103,   80,   87],
                    [  97,   96,   83,   74],
                    [  86,   90,   80,   77],
                    [  83,   88,   79,   84],
                    [  83,   87,   79,   77],
                    [   0,    0,    0,    0],
                ],
                [
                    [   0,    0,    0,    0],
                    [ 225,  221,  189,  182],
                    [  82,   88,   65,   78],
                    [  80,   88,   72,   72],
                    [  72,   84,   74,   76],
                    [  65,   79,   78,   83],
                    [  60,   73,   79,   92],
                    [   0,    0,    0,    0],
                ],
            ]),
            knight: KingRelativePst([
                [
                    [ 263,  313,  323,  324],
                    [ 295,  320,  307,  328],
                    [ 296,  319,  329,  329],
                    [ 311,  332,  351,  343],
                    [ 318,  315,  349,  346],
                    [ 320,  320,  333,  346],
                    [ 280,  312,  322,  317],
                    [ 281,  302,  302,  306],
                ],
                [
                    [ 231,  286,  296,  311],
                    [ 284,  292,  288,  303],
                    [ 286,  300,  305,  324],
                    [ 300,  321,  329,  341],
                    [ 308,  333,  342,  347],
                    [ 319,  324,  330,  334],
                    [ 298,  319,  318,  323],
                    [ 287,  288,  305,  319],
                ],
            ]),
            bishop: KingRelativePst([
                [
                    [ 342,  319,  310,  315],
                    [ 304,  314,  313,  313],
                    [ 303,  310,  316,  303],
                    [ 319,  321,  320,  333],
                    [ 312,  324,  331,  319],
                    [ 323,  330,  322,  321],
                    [ 320,  308,  304,  317],
                    [ 294,  319,  314,  318],
                ],
                [
                    [ 285,  333,  308,  307],
                    [ 305,  329,  300,  314],
                    [ 311,  315,  308,  310],
                    [ 311,  319,  323,  321],
                    [ 303,  327,  323,  319],
                    [ 329,  316,  327,  321],
                    [ 301,  315,  314,  317],
                    [ 304,  328,  331,  316],
                ],
            ]),
            rook: KingRelativePst([
                [
                    [ 504,  511,  514,  517],
                    [ 505,  511,  520,  516],
                    [ 503,  500,  503,  500],
                    [ 511,  497,  503,  509],
                    [ 514,  503,  494,  501],
                    [ 496,  490,  498,  497],
                    [ 485,  493,  496,  490],
                    [ 490,  491,  494,  487],
                ],
                [
                    [ 488,  513,  503,  502],
                    [ 478,  495,  497,  496],
                    [ 470,  488,  473,  490],
                    [ 480,  503,  484,  496],
                    [ 491,  491,  500,  491],
                    [ 482,  476,  484,  493],
                    [ 494,  468,  488,  487],
                    [ 482,  489,  490,  483],
                ],
            ]),
            queen: KingRelativePst([
                [
                    [ 934,  928,  941,  949],
                    [ 911,  911,  935,  986],
                    [ 904,  885,  928,  968],
                    [ 901,  901,  929,  934],
                    [ 920,  909,  895,  927],
                    [ 895,  895,  917,  889],
                    [ 866,  907,  894,  887],
                    [ 905,  888,  865,  893],
                ],
                [
                    [ 913,  870,  944,  949],
                    [ 931,  925,  935,  966],
                    [ 922,  897,  966,  940],
                    [ 932,  963,  946,  938],
                    [ 911,  956,  942,  936],
                    [ 898,  912,  918,  905],
                    [ 854,  876,  883,  900],
                    [ 863,  855,  903,  880],
                ],
            ]),
            king: Pst([
                [ -69,  -64,  -17,  -20,  -24,   -7,  -28,  -89],
                [ -35,   23,   27,   24,   44,   24,   43,  -27],
                [   6,   25,   30,   44,   42,   36,   25,  -11],
                [ -14,   17,   33,   47,   60,   41,   22,    8],
                [ -22,    9,   27,   50,   49,   33,   22,   14],
                [ -42,   -9,   19,   32,   27,   25,    3,   -2],
                [ -46,  -23,   -8,    1,    6,   -4,  -24,  -39],
                [ -79,  -60,  -41,  -26,  -47,  -28,  -53,  -75],
            ]),
        },
        mobility: Mobility {
            pawn: [ 2, 23, 29, 13, 71],
            knight: [ 10, 32, 31, 27, 31, 35, 36, 37, 32],
            bishop: [ -20, -3, 7, 17, 29, 41, 45, 52, 59, 57, 60, 57, 54, 53],
            rook: [ 86, 114, 118, 122, 129, 132, 134, 137, 143, 147, 149, 152, 155, 155, 155],
            queen: [ 13, 50, 135, 165, 208, 210, 204, 218, 238, 235, 255, 263, 269, 271, 281, 279, 291, 298, 312, 306, 295, 311, 319, 324, 287, 308, 297, 285],
            king: [ 0, -19, -14, 0, 4, 9, 9, 10, 3],
        },
        passed_pawns: KingRelativePst([
            [
                [   0,    0,    0,    0],
                [  84,   88,   86,   74],
                [ 126,  127,   98,   80],
                [  57,   49,   33,   39],
                [  25,   20,   20,   17],
                [   1,   12,    7,   -3],
                [   0,    4,    9,    7],
                [   0,    0,    0,    0],
            ],
            [
                [   0,    0,    0,    0],
                [  93,   93,   90,   74],
                [ 178,  163,  141,   93],
                [  86,   76,   69,   45],
                [  54,   51,   35,   26],
                [  10,   12,   11,   14],
                [   4,    7,    5,    3],
                [   0,    0,    0,    0],
            ],
        ]),
        bishop_pair: 59,
        rook_on_open_file: 4,
        rook_on_semiopen_file: 2,
    },
};
