use super::mob::Mobility;
use super::phased_eval::PhasedEval;
use super::pst::{PstEvalSet, KingRelativePst, Pst};
use super::{EvalWeights, EvalTerms};
use super::eval_set::PieceEvalSet;

pub const PIECE_VALUES: PieceEvalSet<i16> = PieceEvalSet {
    pawn: 100,
    knight: 320,
    bishop: 330,
    rook: 500,
    queen: 900,
    king: 0,
};

const fn e(mg: i16, eg: i16) -> PhasedEval {
    PhasedEval(mg, eg)
}

pub const EVAL_WEIGHTS: EvalWeights = EvalTerms {
    piece_tables: PstEvalSet {
        pawn: KingRelativePst([
            [
                [e(   0,    0), e(   0,    0), e(   0,    0), e(   0,    0)],
                [e(  98,  191), e( 113,  180), e( 125,  172), e( 138,  165)],
                [e(  66,  101), e(  87,  107), e( 113,   85), e( 116,  102)],
                [e(  56,   95), e(  82,   97), e(  87,   85), e(  95,   78)],
                [e(  51,   84), e(  79,   93), e(  84,   83), e(  99,   83)],
                [e(  51,   84), e(  75,   92), e(  78,   81), e(  86,   87)],
                [e(  41,   83), e(  65,   91), e(  66,   82), e(  64,   88)],
                [e(   0,    0), e(   0,    0), e(   0,    0), e(   0,    0)],
            ],
            [
                [e(   0,    0), e(   0,    0), e(   0,    0), e(   0,    0)],
                [e(  85,  223), e(  98,  206), e( 124,  199), e( 138,  171)],
                [e( 127,   92), e( 159,  105), e( 156,   73), e( 127,   77)],
                [e( 108,   79), e( 121,   88), e( 117,   74), e( 115,   73)],
                [e(  98,   71), e( 115,   84), e( 108,   74), e( 109,   80)],
                [e( 112,   66), e( 134,   79), e( 108,   78), e(  98,   87)],
                [e(  89,   61), e( 134,   71), e( 105,   78), e(  81,   97)],
                [e(   0,    0), e(   0,    0), e(   0,    0), e(   0,    0)],
            ],
        ]),
        knight: KingRelativePst([
            [
                [e( 178,  248), e( 259,  296), e( 269,  310), e( 295,  312)],
                [e( 308,  303), e( 320,  321), e( 350,  318), e( 369,  313)],
                [e( 309,  310), e( 347,  315), e( 376,  335), e( 384,  339)],
                [e( 318,  320), e( 332,  329), e( 356,  347), e( 374,  352)],
                [e( 313,  324), e( 333,  327), e( 345,  348), e( 344,  346)],
                [e( 306,  313), e( 325,  323), e( 333,  335), e( 340,  340)],
                [e( 284,  297), e( 299,  304), e( 312,  317), e( 326,  316)],
                [e( 250,  282), e( 299,  286), e( 290,  300), e( 304,  304)],
            ],
            [
                [e( 212,  216), e( 285,  266), e( 283,  287), e( 334,  299)],
                [e( 328,  284), e( 332,  304), e( 400,  296), e( 351,  312)],
                [e( 340,  292), e( 366,  305), e( 410,  313), e( 415,  326)],
                [e( 343,  307), e( 341,  327), e( 383,  338), e( 362,  347)],
                [e( 328,  317), e( 352,  324), e( 355,  340), e( 354,  348)],
                [e( 325,  313), e( 348,  323), e( 355,  332), e( 351,  335)],
                [e( 308,  306), e( 306,  310), e( 324,  314), e( 325,  319)],
                [e( 265,  295), e( 303,  293), e( 309,  304), e( 311,  308)],
            ],
        ]),
        bishop: KingRelativePst([
            [
                [e( 311,  324), e( 300,  324), e( 277,  322), e( 263,  330)],
                [e( 322,  311), e( 351,  313), e( 339,  314), e( 312,  322)],
                [e( 330,  318), e( 347,  314), e( 350,  320), e( 366,  308)],
                [e( 323,  319), e( 334,  323), e( 352,  318), e( 367,  331)],
                [e( 335,  318), e( 336,  323), e( 339,  331), e( 358,  324)],
                [e( 342,  324), e( 356,  329), e( 347,  327), e( 346,  324)],
                [e( 344,  310), e( 346,  309), e( 351,  302), e( 333,  317)],
                [e( 332,  303), e( 354,  317), e( 338,  310), e( 329,  313)],
            ],
            [
                [e( 297,  306), e( 310,  321), e( 283,  320), e( 278,  323)],
                [e( 315,  306), e( 325,  321), e( 339,  312), e( 345,  306)],
                [e( 343,  318), e( 363,  313), e( 376,  315), e( 360,  319)],
                [e( 323,  316), e( 334,  316), e( 354,  322), e( 357,  326)],
                [e( 349,  310), e( 341,  324), e( 346,  324), e( 357,  325)],
                [e( 366,  321), e( 365,  325), e( 363,  327), e( 348,  324)],
                [e( 340,  315), e( 366,  315), e( 355,  312), e( 344,  317)],
                [e( 340,  296), e( 345,  310), e( 323,  327), e( 335,  317)],
            ],
        ]),
        rook: KingRelativePst([
            [
                [e( 505,  514), e( 508,  511), e( 501,  520), e( 497,  521)],
                [e( 492,  515), e( 490,  519), e( 508,  520), e( 527,  511)],
                [e( 472,  511), e( 494,  506), e( 487,  511), e( 494,  504)],
                [e( 466,  513), e( 476,  506), e( 477,  510), e( 484,  506)],
                [e( 458,  511), e( 460,  509), e( 466,  508), e( 470,  503)],
                [e( 463,  503), e( 471,  497), e( 471,  498), e( 473,  499)],
                [e( 462,  497), e( 470,  498), e( 482,  496), e( 482,  493)],
                [e( 486,  499), e( 486,  493), e( 487,  498), e( 494,  492)],
            ],
            [
                [e( 547,  498), e( 500,  518), e( 520,  516), e( 521,  507)],
                [e( 564,  482), e( 547,  500), e( 551,  501), e( 514,  509)],
                [e( 537,  479), e( 560,  484), e( 529,  486), e( 518,  495)],
                [e( 505,  490), e( 498,  495), e( 501,  495), e( 484,  498)],
                [e( 489,  495), e( 507,  495), e( 482,  499), e( 478,  499)],
                [e( 514,  483), e( 531,  480), e( 498,  488), e( 486,  490)],
                [e( 485,  483), e( 515,  475), e( 495,  487), e( 489,  489)],
                [e( 488,  482), e( 493,  495), e( 496,  497), e( 499,  487)],
            ],
        ]),
        queen: KingRelativePst([
            [
                [e( 861,  932), e( 868,  925), e( 888,  937), e( 916,  927)],
                [e( 894,  905), e( 879,  915), e( 885,  935), e( 867,  972)],
                [e( 899,  892), e( 895,  894), e( 890,  925), e( 895,  948)],
                [e( 887,  903), e( 884,  907), e( 890,  918), e( 886,  941)],
                [e( 896,  903), e( 892,  909), e( 890,  914), e( 890,  930)],
                [e( 908,  887), e( 909,  899), e( 901,  909), e( 898,  903)],
                [e( 902,  875), e( 901,  890), e( 907,  884), e( 907,  885)],
                [e( 893,  886), e( 894,  885), e( 901,  875), e( 908,  893)],
            ],
            [
                [e( 905,  895), e( 941,  890), e( 920,  938), e( 906,  943)],
                [e( 932,  915), e( 890,  938), e( 909,  954), e( 873,  981)],
                [e( 926,  918), e( 938,  907), e( 915,  948), e( 909,  951)],
                [e( 903,  936), e( 895,  944), e( 894,  953), e( 885,  953)],
                [e( 914,  925), e( 909,  936), e( 900,  932), e( 895,  934)],
                [e( 921,  903), e( 924,  922), e( 919,  917), e( 897,  913)],
                [e( 899,  867), e( 916,  852), e( 914,  872), e( 908,  892)],
                [e( 888,  866), e( 883,  869), e( 885,  889), e( 903,  876)],
            ],
        ]),
        king: Pst([
            [e( -10,  -83), e(   6,  -47), e(  12,  -30), e(  -8,   -8), e(  -3,  -24), e(   5,  -16), e(   9,  -15), e(  -2,  -81)],
            [e( -19,  -23), e(  13,   15), e(   1,   19), e(  37,   21), e(  14,   33), e(  18,   40), e(  27,   28), e(   8,  -10)],
            [e( -27,  -11), e(  45,   16), e(  13,   35), e(  -2,   48), e(   9,   52), e(  54,   43), e(  40,   31), e(   9,   -4)],
            [e( -25,  -14), e( -13,   18), e( -18,   41), e( -63,   57), e( -74,   60), e( -33,   46), e( -29,   27), e( -68,    2)],
            [e( -35,  -22), e( -14,    8), e( -47,   36), e( -94,   57), e( -90,   58), e( -48,   37), e( -43,   17), e( -93,    4)],
            [e(   1,  -29), e(  36,   -3), e( -20,   20), e( -44,   35), e( -39,   33), e( -23,   24), e(  19,    0), e( -18,   -9)],
            [e(  61,  -47), e(  60,  -24), e(  30,   -5), e(   8,    3), e(   3,    7), e(  22,   -4), e(  64,  -27), e(  52,  -40)],
            [e(  53,  -75), e(  75,  -60), e(  52,  -37), e( -23,  -23), e(  36,  -43), e(   4,  -26), e(  66,  -55), e(  64,  -73)],
        ]),
    },
    mobility: Mobility {
        pawn: [e(-15, 6), e(-7, 29), e(3, 34), e(28, 20), e(0, 50)],
        knight: [e(-63, 34), e(-49, 30), e(-42, 35), e(-38, 30), e(-36, 35), e(-36, 41), e(-35, 41), e(-37, 40), e(-34, 34)],
        bishop: [e(-67, -16), e(-59, 0), e(-54, 7), e(-47, 19), e(-41, 31), e(-33, 44), e(-28, 47), e(-25, 55), e(-24, 61), e(-23, 60), e(-21, 59), e(-18, 58), e(-12, 65), e(4, 53)],
        rook: [e(-131, 102), e(-119, 118), e(-116, 121), e(-113, 124), e(-112, 129), e(-109, 132), e(-106, 134), e(-102, 137), e(-101, 142), e(-100, 148), e(-99, 148), e(-96, 151), e(-95, 154), e(-85, 154), e(-87, 152)],
        queen: [e(-38, 7), e(-43, 45), e(-51, 152), e(-52, 187), e(-50, 196), e(-46, 201), e(-43, 211), e(-45, 234), e(-44, 242), e(-43, 246), e(-42, 256), e(-41, 262), e(-42, 271), e(-39, 278), e(-39, 284), e(-39, 289), e(-35, 292), e(-39, 304), e(-37, 311), e(-34, 312), e(-23, 310), e(-22, 313), e(-16, 311), e(-13, 317), e(12, 296), e(31, 301), e(3, 301), e(9, 303)],
        king: [e(5, 0), e(-4, -29), e(-7, -22), e(-16, -5), e(-22, -3), e(-36, 3), e(-35, 3), e(-50, 9), e(-52, 7)],
    },
    passed_pawns: KingRelativePst([
        [
            [e(   0,    0), e(   0,    0), e(   0,    0), e(   0,    0)],
            [e(   5,   98), e(  25,   92), e(  25,   73), e(  34,   62)],
            [e(  23,  134), e(  41,  119), e(  32,  101), e(  17,   66)],
            [e(  29,   62), e(  22,   52), e(  28,   36), e(  15,   40)],
            [e(  18,   31), e(   2,   19), e( -11,   17), e(  -7,   13)],
            [e(   4,    4), e( -15,   12), e( -16,    7), e( -16,   -6)],
            [e(   0,    3), e(  -4,    7), e(  -8,    2), e( -13,  -15)],
            [e(   0,    0), e(   0,    0), e(   0,    0), e(   0,    0)],
        ],
        [
            [e(   0,    0), e(   0,    0), e(   0,    0), e(   0,    0)],
            [e( -35,  103), e( -11,   98), e(  15,   89), e(  33,   66)],
            [e( -65,  169), e( -41,  149), e(   4,  133), e(  14,   95)],
            [e( -39,   92), e( -19,   84), e(   8,   68), e(  -2,   47)],
            [e( -36,   53), e( -14,   49), e( -17,   35), e( -15,   25)],
            [e( -13,   12), e(  -3,   13), e( -27,   10), e( -17,    6)],
            [e( -22,   11), e(  11,    2), e(  -3,   -1), e(  -3,   -8)],
            [e(   0,    0), e(   0,    0), e(   0,    0), e(   0,    0)],
        ],
    ]),
    bishop_pair: e(21, 64),
    rook_on_open_file: e(35, 6),
    rook_on_semiopen_file: e(13, 3),
    virtual_queen_mobility: [e(3, 1), e(27, 13), e(19, 17), e(18, 4), e(15, 6), e(17, 2), e(15, 1), e(13, 2), e(10, 4), e(5, 5), e(1, 8), e(-5, 9), e(-9, 10), e(-15, 10), e(-17, 8), e(-16, 8), e(-18, 3), e(-15, 3), e(-13, -2), e(-9, -5), e(-7, -9), e(-7, -13), e(-6, -15), e(-3, -20), e(-3, -18), e(-2, -20), e(-1, -8), e(0, -5)]
};
