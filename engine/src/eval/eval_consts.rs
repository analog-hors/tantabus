use super::mob::Mobility;
use super::pst::{PstEvalSet, KingRelativePst, Pst};
use super::{Evaluator, EvalTerms};
use super::eval_set::PieceEvalSet;

pub const PIECE_VALUES: PieceEvalSet<i16> = PieceEvalSet {
    pawn: 100,
    knight: 320,
    bishop: 330,
    rook: 500,
    queen: 900,
    king: 0,
};

pub const EVALUATOR: Evaluator = Evaluator {
    midgame: EvalTerms {
        piece_tables: PstEvalSet {
            pawn: KingRelativePst([
                [
                    [   0,    0,    0,    0],
                    [  97,  113,  125,  137],
                    [  64,   87,  113,  117],
                    [  55,   79,   86,   96],
                    [  49,   77,   83,   98],
                    [  49,   71,   78,   86],
                    [  40,   61,   66,   65],
                    [   0,    0,    0,    0],
                ],
                [
                    [   0,    0,    0,    0],
                    [  85,   98,  124,  137],
                    [ 127,  159,  155,  126],
                    [ 109,  120,  116,  114],
                    [ 100,  115,  109,  105],
                    [ 111,  133,  111,   98],
                    [  88,  133,  107,   80],
                    [   0,    0,    0,    0],
                ],
            ]),
            knight: KingRelativePst([
                [
                    [ 179,  260,  270,  295],
                    [ 308,  319,  350,  369],
                    [ 309,  348,  375,  382],
                    [ 318,  331,  356,  373],
                    [ 312,  333,  344,  344],
                    [ 305,  324,  331,  340],
                    [ 284,  299,  312,  324],
                    [ 250,  301,  291,  306],
                ],
                [
                    [ 213,  285,  283,  334],
                    [ 328,  332,  400,  350],
                    [ 340,  366,  410,  413],
                    [ 343,  340,  382,  360],
                    [ 329,  352,  354,  353],
                    [ 325,  348,  352,  353],
                    [ 307,  305,  325,  325],
                    [ 264,  305,  310,  313],
                ],
            ]),
            bishop: KingRelativePst([
                [
                    [ 311,  300,  278,  263],
                    [ 322,  349,  338,  312],
                    [ 330,  347,  349,  365],
                    [ 323,  333,  352,  365],
                    [ 335,  336,  338,  357],
                    [ 342,  355,  347,  343],
                    [ 344,  345,  351,  334],
                    [ 332,  354,  337,  331],
                ],
                [
                    [ 297,  310,  283,  278],
                    [ 315,  324,  338,  344],
                    [ 343,  363,  375,  359],
                    [ 322,  333,  353,  356],
                    [ 349,  340,  344,  356],
                    [ 365,  363,  362,  348],
                    [ 340,  363,  356,  344],
                    [ 340,  345,  327,  338],
                ],
            ]),
            rook: KingRelativePst([
                [
                    [ 507,  509,  502,  498],
                    [ 494,  491,  509,  530],
                    [ 474,  495,  487,  495],
                    [ 466,  477,  478,  485],
                    [ 458,  460,  467,  472],
                    [ 463,  472,  472,  475],
                    [ 462,  471,  485,  485],
                    [ 487,  487,  490,  497],
                ],
                [
                    [ 547,  500,  520,  522],
                    [ 564,  546,  551,  516],
                    [ 537,  559,  528,  519],
                    [ 504,  497,  500,  484],
                    [ 488,  506,  482,  479],
                    [ 513,  531,  499,  488],
                    [ 486,  516,  496,  491],
                    [ 490,  495,  496,  503],
                ],
            ]),
            queen: KingRelativePst([
                [
                    [ 861,  868,  888,  915],
                    [ 894,  877,  884,  867],
                    [ 899,  895,  889,  895],
                    [ 886,  885,  889,  885],
                    [ 896,  892,  889,  890],
                    [ 908,  907,  901,  898],
                    [ 902,  900,  906,  909],
                    [ 894,  896,  904,  907],
                ],
                [
                    [ 905,  941,  920,  906],
                    [ 932,  889,  909,  873],
                    [ 926,  937,  914,  908],
                    [ 901,  894,  894,  885],
                    [ 914,  909,  901,  896],
                    [ 922,  925,  920,  900],
                    [ 899,  916,  915,  909],
                    [ 888,  883,  888,  907],
                ],
            ]),
            king: Pst([
                [ -10,    6,   12,   -8,   -3,    5,    9,   -2],
                [ -19,   13,    1,   37,   14,   18,   27,    8],
                [ -27,   45,   13,   -2,    9,   53,   40,    9],
                [ -25,  -13,  -18,  -63,  -74,  -33,  -29,  -68],
                [ -35,  -14,  -47,  -94,  -91,  -49,  -43,  -93],
                [   1,   35,  -21,  -45,  -40,  -24,   18,  -18],
                [  61,   60,   29,    7,    3,   21,   68,   55],
                [  52,   76,   49,  -24,   36,    4,   71,   65],
            ]),
        },
        mobility: Mobility {
            pawn: [-18, -11, -2, 28, 0],
            knight: [-63, -48, -41, -37, -35, -36, -36, -36, -34],
            bishop: [-64, -58, -51, -48, -41, -35, -30, -27, -26, -24, -21, -18, -12, 4],
            rook: [-129, -119, -115, -111, -111, -106, -103, -99, -97, -95, -92, -89, -87, -76, -78],
            queen: [-38, -44, -53, -52, -49, -47, -43, -46, -44, -42, -41, -41, -41, -40, -39, -39, -35, -38, -36, -33, -23, -21, -16, -13, 12, 31, 3, 9],
            king: [2, 6, -2, -11, -21, -38, -42, -57, -54],
        },
        passed_pawns: KingRelativePst([
            [
                [   0,    0,    0,    0],
                [   5,   25,   25,   34],
                [  23,   41,   33,   18],
                [  30,   23,   28,   16],
                [  18,    4,  -10,   -5],
                [   6,  -13,  -16,  -16],
                [   3,   -3,   -8,  -13],
                [   0,    0,    0,    0],
            ],
            [
                [   0,    0,    0,    0],
                [ -35,  -11,   15,   32],
                [ -66,  -41,    3,   14],
                [ -40,  -18,    8,   -2],
                [ -37,  -14,  -16,  -15],
                [ -13,   -2,  -26,  -16],
                [ -21,   12,   -1,   -3],
                [   0,    0,    0,    0],
            ],
        ]),
        bishop_pair: 19,
        rook_on_open_file: 27,
        rook_on_semiopen_file: 11,
        isolated_pawns: [-4, -12, -16, -17, -17, -11, -9, -2],
    },
    endgame: EvalTerms {
        piece_tables: PstEvalSet {
            pawn: KingRelativePst([
                [
                    [   0,    0,    0,    0],
                    [ 191,  180,  172,  165],
                    [ 102,  108,   85,  103],
                    [  96,   96,   84,   78],
                    [  83,   89,   82,   82],
                    [  80,   86,   80,   87],
                    [  83,   87,   82,   89],
                    [   0,    0,    0,    0],
                ],
                [
                    [   0,    0,    0,    0],
                    [ 222,  206,  198,  170],
                    [  92,  105,   73,   78],
                    [  79,   86,   74,   75],
                    [  70,   81,   74,   80],
                    [  63,   74,   79,   87],
                    [  60,   70,   80,   98],
                    [   0,    0,    0,    0],
                ],
            ]),
            knight: KingRelativePst([
                [
                    [ 248,  296,  310,  312],
                    [ 303,  321,  318,  313],
                    [ 310,  315,  334,  338],
                    [ 320,  329,  346,  350],
                    [ 324,  327,  347,  347],
                    [ 313,  323,  333,  340],
                    [ 297,  304,  318,  316],
                    [ 282,  289,  301,  306],
                ],
                [
                    [ 216,  266,  287,  299],
                    [ 284,  304,  295,  312],
                    [ 292,  305,  312,  325],
                    [ 307,  327,  338,  345],
                    [ 317,  325,  339,  347],
                    [ 313,  323,  330,  336],
                    [ 307,  310,  314,  320],
                    [ 295,  295,  306,  310],
                ],
            ]),
            bishop: KingRelativePst([
                [
                    [ 324,  324,  322,  330],
                    [ 311,  312,  314,  322],
                    [ 318,  315,  320,  308],
                    [ 319,  323,  317,  330],
                    [ 318,  323,  330,  324],
                    [ 323,  328,  327,  323],
                    [ 310,  309,  303,  318],
                    [ 303,  317,  312,  315],
                ],
                [
                    [ 306,  321,  320,  323],
                    [ 306,  321,  312,  306],
                    [ 317,  313,  315,  318],
                    [ 316,  315,  321,  325],
                    [ 310,  324,  323,  325],
                    [ 321,  324,  327,  324],
                    [ 314,  315,  312,  316],
                    [ 296,  310,  332,  319],
                ],
            ]),
            rook: KingRelativePst([
                [
                    [ 514,  511,  521,  521],
                    [ 512,  517,  518,  511],
                    [ 510,  506,  510,  504],
                    [ 513,  506,  510,  506],
                    [ 513,  510,  509,  505],
                    [ 504,  498,  499,  500],
                    [ 498,  499,  495,  494],
                    [ 494,  494,  497,  491],
                ],
                [
                    [ 497,  517,  516,  508],
                    [ 482,  499,  501,  510],
                    [ 479,  484,  485,  495],
                    [ 490,  496,  494,  498],
                    [ 495,  495,  500,  501],
                    [ 483,  481,  490,  492],
                    [ 484,  476,  488,  490],
                    [ 483,  496,  495,  488],
                ],
            ]),
            queen: KingRelativePst([
                [
                    [ 931,  924,  936,  926],
                    [ 904,  915,  935,  972],
                    [ 891,  893,  925,  947],
                    [ 903,  907,  918,  941],
                    [ 903,  909,  912,  929],
                    [ 887,  898,  909,  903],
                    [ 875,  890,  885,  887],
                    [ 886,  886,  877,  896],
                ],
                [
                    [ 895,  890,  938,  942],
                    [ 915,  938,  954,  981],
                    [ 918,  907,  948,  951],
                    [ 935,  943,  953,  953],
                    [ 925,  936,  932,  933],
                    [ 903,  922,  917,  913],
                    [ 867,  852,  873,  892],
                    [ 866,  869,  891,  879],
                ],
            ]),
            king: Pst([
                [ -83,  -47,  -30,   -8,  -24,  -16,  -15,  -81],
                [ -23,   16,   20,   21,   33,   41,   29,  -10],
                [ -10,   18,   35,   47,   50,   42,   32,   -3],
                [ -13,   19,   39,   54,   56,   45,   29,    2],
                [ -21,    9,   34,   52,   52,   34,   19,    5],
                [ -28,   -2,   19,   33,   30,   22,    2,   -8],
                [ -46,  -23,   -4,    5,    8,   -1,  -22,  -37],
                [ -75,  -60,  -39,  -25,  -46,  -26,  -52,  -74],
            ]),
        },
        mobility: Mobility {
            pawn: [5, 23, 26, 21, 50],
            knight: [34, 31, 36, 32, 36, 41, 41, 41, 36],
            bishop: [-15, 1, 10, 21, 33, 45, 48, 55, 62, 60, 60, 60, 65, 54],
            rook: [103, 121, 123, 127, 133, 135, 137, 139, 145, 149, 150, 152, 155, 156, 154],
            queen: [7, 45, 151, 186, 196, 201, 209, 233, 241, 246, 256, 261, 270, 277, 283, 289, 292, 303, 310, 311, 310, 313, 311, 317, 296, 301, 301, 303],
            king: [-1, -23, -18, -4, 1, 4, 4, 5, -5],
        },
        passed_pawns: KingRelativePst([
            [
                [   0,    0,    0,    0],
                [  98,   92,   73,   62],
                [ 135,  120,  102,   67],
                [  63,   54,   36,   39],
                [  32,   21,   17,   14],
                [   4,   13,    8,   -4],
                [   4,    8,    3,  -15],
                [   0,    0,    0,    0],
            ],
            [
                [   0,    0,    0,    0],
                [ 102,   98,   88,   66],
                [ 170,  149,  133,   95],
                [  93,   85,   68,   48],
                [  55,   51,   37,   26],
                [  14,   16,   12,    8],
                [  13,    4,    1,   -8],
                [   0,    0,    0,    0],
            ],
        ]),
        bishop_pair: 62,
        rook_on_open_file: 4,
        rook_on_semiopen_file: 1,
        isolated_pawns: [-4, -13, -11, -15, -18, -11, -14, -8],
    },
};
