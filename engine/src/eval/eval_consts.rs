use super::mob::Mobility;
use super::pst::{PstEvalSet, KingRelativePst, Pst};
use super::{Evaluator, EvalTerms};
use super::eval_set::PieceEvalSet;

pub const PIECE_VALUES: PieceEvalSet<i16> = PieceEvalSet {
    pawn: 100,
    knight: 320,
    bishop: 330,
    rook: 500,
    queen: 900,
    king: 0,
};

pub const EVALUATOR: Evaluator = Evaluator {
    midgame: EvalTerms {
        piece_tables: PstEvalSet {
            pawn: KingRelativePst([
                [
                    [   0,    0,    0,    0],
                    [  97,  113,  125,  137],
                    [  63,   86,  113,  115],
                    [  55,   81,   87,   96],
                    [  48,   79,   84,   96],
                    [  48,   73,   79,   86],
                    [  40,   64,   66,   65],
                    [   0,    0,    0,    0],
                ],
                [
                    [   0,    0,    0,    0],
                    [  85,   98,  124,  137],
                    [ 127,  159,  155,  126],
                    [ 109,  122,  118,  115],
                    [  99,  117,  111,  105],
                    [ 109,  136,  113,  100],
                    [  87,  136,  109,   80],
                    [   0,    0,    0,    0],
                ],
            ]),
            knight: KingRelativePst([
                [
                    [ 179,  260,  270,  295],
                    [ 308,  319,  350,  369],
                    [ 309,  348,  376,  383],
                    [ 318,  331,  356,  373],
                    [ 312,  333,  344,  344],
                    [ 305,  324,  331,  340],
                    [ 284,  299,  312,  324],
                    [ 250,  301,  291,  306],
                ],
                [
                    [ 213,  285,  283,  334],
                    [ 328,  332,  400,  350],
                    [ 340,  366,  410,  414],
                    [ 343,  340,  382,  360],
                    [ 329,  352,  354,  353],
                    [ 325,  348,  351,  353],
                    [ 307,  305,  325,  325],
                    [ 264,  305,  310,  313],
                ],
            ]),
            bishop: KingRelativePst([
                [
                    [ 311,  300,  278,  263],
                    [ 322,  349,  338,  312],
                    [ 330,  347,  350,  365],
                    [ 323,  333,  352,  365],
                    [ 335,  336,  338,  357],
                    [ 342,  355,  347,  344],
                    [ 344,  345,  351,  335],
                    [ 332,  354,  338,  331],
                ],
                [
                    [ 297,  310,  283,  278],
                    [ 315,  324,  338,  344],
                    [ 343,  363,  376,  359],
                    [ 322,  333,  353,  356],
                    [ 349,  341,  344,  357],
                    [ 365,  363,  362,  349],
                    [ 340,  363,  356,  344],
                    [ 340,  345,  327,  338],
                ],
            ]),
            rook: KingRelativePst([
                [
                    [ 507,  509,  502,  498],
                    [ 495,  492,  510,  530],
                    [ 474,  495,  488,  496],
                    [ 467,  477,  478,  485],
                    [ 458,  460,  467,  472],
                    [ 463,  472,  473,  475],
                    [ 463,  471,  485,  485],
                    [ 487,  487,  490,  497],
                ],
                [
                    [ 547,  500,  520,  522],
                    [ 565,  547,  551,  516],
                    [ 537,  560,  528,  520],
                    [ 504,  497,  500,  484],
                    [ 488,  506,  482,  479],
                    [ 512,  531,  499,  488],
                    [ 486,  516,  496,  491],
                    [ 490,  496,  497,  503],
                ],
            ]),
            queen: KingRelativePst([
                [
                    [ 861,  868,  888,  915],
                    [ 894,  878,  884,  867],
                    [ 899,  895,  890,  895],
                    [ 886,  885,  889,  885],
                    [ 896,  892,  890,  890],
                    [ 908,  907,  901,  898],
                    [ 903,  900,  906,  909],
                    [ 894,  896,  905,  907],
                ],
                [
                    [ 905,  941,  920,  906],
                    [ 932,  889,  910,  873],
                    [ 926,  938,  914,  909],
                    [ 901,  893,  894,  885],
                    [ 914,  909,  900,  896],
                    [ 922,  925,  919,  900],
                    [ 899,  916,  915,  909],
                    [ 888,  883,  888,  908],
                ],
            ]),
            king: Pst([
                [ -10,    6,   12,   -8,   -3,    5,    9,   -2],
                [ -19,   13,    1,   37,   14,   18,   27,    8],
                [ -27,   45,   13,   -2,    9,   53,   40,    9],
                [ -25,  -13,  -18,  -63,  -74,  -33,  -29,  -68],
                [ -35,  -14,  -47,  -94,  -91,  -49,  -43,  -93],
                [   1,   35,  -21,  -45,  -40,  -24,   18,  -18],
                [  61,   60,   29,    7,    3,   21,   68,   55],
                [  52,   76,   49,  -24,   36,    4,   71,   65],
            ]),
        },
        mobility: Mobility {
            pawn: [ -13, -6, 2, 29, 0],
            knight: [ -63, -48, -41, -37, -35, -36, -37, -37, -34],
            bishop: [ -64, -58, -51, -48, -42, -35, -30, -27, -25, -24, -21, -18, -12, 4],
            rook: [ -129, -119, -115, -111, -111, -106, -103, -99, -96, -94, -91, -88, -86, -75, -76],
            queen: [ -38, -44, -53, -52, -50, -47, -44, -46, -44, -42, -41, -41, -41, -40, -38, -38, -35, -38, -36, -33, -23, -21, -16, -13, 12, 31, 3, 9],
            king: [ 2, 6, -2, -11, -21, -38, -42, -56, -55],
        },
        passed_pawns: KingRelativePst([
            [
                [   0,    0,    0,    0],
                [   4,   25,   25,   33],
                [  22,   41,   32,   16],
                [  29,   22,   27,   14],
                [  17,    2,  -11,   -9],
                [   4,  -14,  -18,  -18],
                [   1,   -4,   -9,  -13],
                [   0,    0,    0,    0],
            ],
            [
                [   0,    0,    0,    0],
                [ -35,  -11,   15,   32],
                [ -66,  -41,    3,   13],
                [ -40,  -18,    7,   -3],
                [ -37,  -15,  -17,  -16],
                [ -15,   -3,  -27,  -18],
                [ -23,   10,   -3,   -3],
                [   0,    0,    0,    0],
            ],
        ]),
        bishop_pair: 19,
        rook_on_open_file: 27,
        rook_on_semiopen_file: 13,
        doubled_pawn: -15,
    },
    endgame: EvalTerms {
        piece_tables: PstEvalSet {
            pawn: KingRelativePst([
                [
                    [   0,    0,    0,    0],
                    [ 191,  180,  172,  164],
                    [ 101,  107,   84,  102],
                    [  96,   96,   84,   77],
                    [  83,   90,   82,   79],
                    [  80,   89,   81,   87],
                    [  83,   89,   83,   89],
                    [   0,    0,    0,    0],
                ],
                [
                    [   0,    0,    0,    0],
                    [ 222,  206,  198,  170],
                    [  92,  104,   74,   77],
                    [  79,   88,   76,   73],
                    [  70,   84,   77,   78],
                    [  63,   79,   81,   86],
                    [  60,   74,   83,   98],
                    [   0,    0,    0,    0],
                ],
            ]),
            knight: KingRelativePst([
                [
                    [ 248,  296,  310,  312],
                    [ 303,  321,  319,  313],
                    [ 310,  315,  334,  338],
                    [ 320,  329,  346,  350],
                    [ 324,  327,  348,  347],
                    [ 313,  323,  333,  340],
                    [ 297,  304,  318,  316],
                    [ 282,  289,  301,  306],
                ],
                [
                    [ 216,  266,  287,  299],
                    [ 284,  304,  295,  312],
                    [ 292,  305,  313,  325],
                    [ 307,  327,  338,  345],
                    [ 317,  325,  340,  348],
                    [ 313,  323,  331,  336],
                    [ 307,  310,  314,  319],
                    [ 295,  294,  306,  309],
                ],
            ]),
            bishop: KingRelativePst([
                [
                    [ 324,  324,  322,  330],
                    [ 311,  313,  314,  322],
                    [ 318,  315,  320,  308],
                    [ 319,  324,  317,  330],
                    [ 318,  324,  330,  324],
                    [ 323,  328,  327,  323],
                    [ 310,  310,  303,  319],
                    [ 303,  317,  313,  315],
                ],
                [
                    [ 306,  321,  320,  323],
                    [ 306,  321,  312,  306],
                    [ 317,  313,  315,  318],
                    [ 316,  316,  322,  325],
                    [ 310,  324,  323,  325],
                    [ 322,  325,  327,  324],
                    [ 314,  315,  312,  316],
                    [ 296,  310,  332,  319],
                ],
            ]),
            rook: KingRelativePst([
                [
                    [ 514,  511,  521,  521],
                    [ 513,  518,  519,  512],
                    [ 510,  506,  510,  505],
                    [ 514,  506,  510,  506],
                    [ 513,  510,  509,  505],
                    [ 504,  498,  499,  501],
                    [ 498,  499,  495,  494],
                    [ 496,  494,  497,  492],
                ],
                [
                    [ 497,  517,  516,  508],
                    [ 482,  500,  501,  511],
                    [ 480,  484,  486,  495],
                    [ 490,  496,  495,  498],
                    [ 495,  495,  500,  501],
                    [ 483,  481,  490,  492],
                    [ 484,  476,  488,  491],
                    [ 484,  496,  496,  488],
                ],
            ]),
            queen: KingRelativePst([
                [
                    [ 931,  924,  936,  926],
                    [ 905,  915,  935,  972],
                    [ 891,  893,  925,  947],
                    [ 903,  907,  918,  941],
                    [ 903,  909,  912,  929],
                    [ 887,  898,  909,  903],
                    [ 875,  890,  885,  887],
                    [ 886,  885,  877,  896],
                ],
                [
                    [ 895,  890,  938,  942],
                    [ 915,  938,  954,  981],
                    [ 918,  907,  948,  951],
                    [ 935,  943,  953,  953],
                    [ 925,  936,  932,  933],
                    [ 903,  922,  917,  913],
                    [ 867,  852,  873,  892],
                    [ 866,  869,  891,  879],
                ],
            ]),
            king: Pst([
                [ -83,  -47,  -30,   -8,  -24,  -16,  -15,  -81],
                [ -23,   16,   20,   21,   33,   41,   29,  -10],
                [ -10,   18,   35,   47,   50,   42,   32,   -3],
                [ -13,   19,   39,   54,   56,   45,   29,    2],
                [ -21,    9,   34,   52,   52,   34,   19,    5],
                [ -28,   -2,   19,   33,   30,   22,    2,   -7],
                [ -46,  -23,   -3,    5,    8,   -1,  -22,  -37],
                [ -75,  -60,  -39,  -24,  -45,  -26,  -53,  -74],
            ]),
        },
        mobility: Mobility {
            pawn: [ 7, 25, 28, 22, 50],
            knight: [ 34, 31, 37, 33, 37, 41, 41, 41, 36],
            bishop: [ -15, 1, 9, 20, 33, 45, 48, 55, 62, 61, 61, 61, 65, 54],
            rook: [ 104, 122, 124, 127, 133, 136, 137, 139, 145, 149, 150, 153, 156, 157, 155],
            queen: [ 7, 45, 151, 186, 196, 201, 210, 234, 241, 247, 256, 261, 270, 277, 283, 289, 292, 303, 311, 311, 310, 313, 311, 317, 296, 301, 301, 303],
            king: [ -1, -23, -18, -4, 0, 4, 3, 4, -3],
        },
        passed_pawns: KingRelativePst([
            [
                [   0,    0,    0,    0],
                [  98,   92,   73,   61],
                [ 135,  119,  101,   65],
                [  62,   52,   34,   37],
                [  31,   18,   15,   11],
                [   3,   11,    6,   -6],
                [   2,    6,    1,  -15],
                [   0,    0,    0,    0],
            ],
            [
                [   0,    0,    0,    0],
                [ 102,   98,   88,   65],
                [ 170,  149,  133,   94],
                [  92,   83,   67,   46],
                [  53,   49,   34,   23],
                [  12,   13,   10,    5],
                [  11,    2,   -1,   -8],
                [   0,    0,    0,    0],
            ],
        ]),
        bishop_pair: 63,
        rook_on_open_file: 4,
        rook_on_semiopen_file: 4,
        doubled_pawn: -20,
    },
};
