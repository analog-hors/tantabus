use super::mob::Mobility;
use super::pst::{PstEvalSet, KingRelativePst, Pst};
use super::{Evaluator, EvalTerms};
use super::eval_set::PieceEvalSet;

pub const PIECE_VALUES: PieceEvalSet<i16> = PieceEvalSet {
    pawn: 100,
    knight: 320,
    bishop: 330,
    rook: 500,
    queen: 900,
    king: 0,
};

pub const EVALUATOR: Evaluator = Evaluator {
    midgame: EvalTerms {
        piece_tables: PstEvalSet {
            pawn: KingRelativePst([
                [
                    [   0,    0,    0,    0],
                    [  98,  113,  125,  138],
                    [  66,   87,  113,  116],
                    [  56,   82,   87,   95],
                    [  51,   79,   84,   99],
                    [  51,   75,   78,   86],
                    [  41,   65,   66,   64],
                    [   0,    0,    0,    0],
                ],
                [
                    [   0,    0,    0,    0],
                    [  85,   98,  124,  138],
                    [ 127,  159,  156,  127],
                    [ 108,  121,  117,  115],
                    [  98,  115,  108,  109],
                    [ 112,  134,  108,   98],
                    [  89,  134,  105,   81],
                    [   0,    0,    0,    0],
                ],
            ]),
            knight: KingRelativePst([
                [
                    [ 178,  259,  269,  295],
                    [ 308,  320,  350,  369],
                    [ 309,  347,  376,  384],
                    [ 318,  332,  356,  374],
                    [ 313,  333,  345,  344],
                    [ 306,  325,  333,  340],
                    [ 284,  299,  312,  326],
                    [ 250,  299,  290,  304],
                ],
                [
                    [ 212,  285,  283,  334],
                    [ 328,  332,  400,  351],
                    [ 340,  366,  410,  415],
                    [ 343,  341,  383,  362],
                    [ 328,  352,  355,  354],
                    [ 325,  348,  355,  351],
                    [ 308,  306,  324,  325],
                    [ 265,  303,  309,  311],
                ],
            ]),
            bishop: KingRelativePst([
                [
                    [ 311,  300,  277,  263],
                    [ 322,  351,  339,  312],
                    [ 330,  347,  350,  366],
                    [ 323,  334,  352,  367],
                    [ 335,  336,  339,  358],
                    [ 342,  356,  347,  346],
                    [ 344,  346,  351,  333],
                    [ 332,  354,  338,  329],
                ],
                [
                    [ 297,  310,  283,  278],
                    [ 315,  325,  339,  345],
                    [ 343,  363,  376,  360],
                    [ 323,  334,  354,  357],
                    [ 349,  341,  346,  357],
                    [ 366,  365,  363,  348],
                    [ 340,  366,  355,  344],
                    [ 340,  345,  323,  335],
                ],
            ]),
            rook: KingRelativePst([
                [
                    [ 505,  508,  501,  497],
                    [ 492,  490,  508,  527],
                    [ 472,  494,  487,  494],
                    [ 466,  476,  477,  484],
                    [ 458,  460,  466,  470],
                    [ 463,  471,  471,  473],
                    [ 462,  470,  482,  482],
                    [ 486,  486,  487,  494],
                ],
                [
                    [ 547,  500,  520,  521],
                    [ 564,  547,  551,  514],
                    [ 537,  560,  529,  518],
                    [ 505,  498,  501,  484],
                    [ 489,  507,  482,  478],
                    [ 514,  531,  498,  486],
                    [ 485,  515,  495,  489],
                    [ 488,  493,  496,  499],
                ],
            ]),
            queen: KingRelativePst([
                [
                    [ 861,  868,  888,  916],
                    [ 894,  879,  885,  867],
                    [ 899,  895,  890,  895],
                    [ 887,  884,  890,  886],
                    [ 896,  892,  890,  890],
                    [ 908,  909,  901,  898],
                    [ 902,  901,  907,  907],
                    [ 893,  894,  901,  908],
                ],
                [
                    [ 905,  941,  920,  906],
                    [ 932,  890,  909,  873],
                    [ 926,  938,  915,  909],
                    [ 903,  895,  894,  885],
                    [ 914,  909,  900,  895],
                    [ 921,  924,  919,  897],
                    [ 899,  916,  914,  908],
                    [ 888,  883,  885,  903],
                ],
            ]),
            king: Pst([
                [ -10,    6,   12,   -8,   -3,    5,    9,   -2],
                [ -19,   13,    1,   37,   14,   18,   27,    8],
                [ -27,   45,   13,   -2,    9,   54,   40,    9],
                [ -25,  -13,  -18,  -63,  -74,  -33,  -29,  -68],
                [ -35,  -14,  -47,  -94,  -90,  -48,  -43,  -93],
                [   1,   36,  -20,  -44,  -39,  -23,   19,  -18],
                [  61,   60,   30,    8,    3,   22,   64,   52],
                [  53,   75,   52,  -23,   36,    4,   66,   64],
            ]),
        },
        mobility: Mobility {
            pawn: [-15, -7, 3, 28, 0],
            knight: [-63, -49, -42, -38, -36, -36, -35, -37, -34],
            bishop: [-67, -59, -54, -47, -41, -33, -28, -25, -24, -23, -21, -18, -12, 4],
            rook: [-131, -119, -116, -113, -112, -109, -106, -102, -101, -100, -99, -96, -95, -85, -87],
            queen: [-38, -43, -51, -52, -50, -46, -43, -45, -44, -43, -42, -41, -42, -39, -39, -39, -35, -39, -37, -34, -23, -22, -16, -13, 12, 31, 3, 9],
            king: [5, -4, -7, -16, -22, -36, -35, -50, -52],
        },
        passed_pawns: KingRelativePst([
            [
                [   0,    0,    0,    0],
                [   5,   25,   25,   34],
                [  23,   41,   32,   17],
                [  29,   22,   28,   15],
                [  18,    2,  -11,   -7],
                [   4,  -15,  -16,  -16],
                [   0,   -4,   -8,  -13],
                [   0,    0,    0,    0],
            ],
            [
                [   0,    0,    0,    0],
                [ -35,  -11,   15,   33],
                [ -65,  -41,    4,   14],
                [ -39,  -19,    8,   -2],
                [ -36,  -14,  -17,  -15],
                [ -13,   -3,  -27,  -17],
                [ -22,   11,   -3,   -3],
                [   0,    0,    0,    0],
            ],
        ]),
        bishop_pair: 21,
        rook_on_open_file: 35,
        rook_on_semiopen_file: 13,
        virtual_queen_mobility: [3, 27, 19, 18, 15, 17, 15, 13, 10, 5, 1, -5, -9, -15, -17, -16, -18, -15, -13, -9, -7, -7, -6, -3, -3, -2, -1, 0],
    },
    endgame: EvalTerms {
        piece_tables: PstEvalSet {
            pawn: KingRelativePst([
                [
                    [   0,    0,    0,    0],
                    [ 191,  180,  172,  165],
                    [ 101,  107,   85,  102],
                    [  95,   97,   85,   78],
                    [  84,   93,   83,   83],
                    [  84,   92,   81,   87],
                    [  83,   91,   82,   88],
                    [   0,    0,    0,    0],
                ],
                [
                    [   0,    0,    0,    0],
                    [ 223,  206,  199,  171],
                    [  92,  105,   73,   77],
                    [  79,   88,   74,   73],
                    [  71,   84,   74,   80],
                    [  66,   79,   78,   87],
                    [  61,   71,   78,   97],
                    [   0,    0,    0,    0],
                ],
            ]),
            knight: KingRelativePst([
                [
                    [ 248,  296,  310,  312],
                    [ 303,  321,  318,  313],
                    [ 310,  315,  335,  339],
                    [ 320,  329,  347,  352],
                    [ 324,  327,  348,  346],
                    [ 313,  323,  335,  340],
                    [ 297,  304,  317,  316],
                    [ 282,  286,  300,  304],
                ],
                [
                    [ 216,  266,  287,  299],
                    [ 284,  304,  296,  312],
                    [ 292,  305,  313,  326],
                    [ 307,  327,  338,  347],
                    [ 317,  324,  340,  348],
                    [ 313,  323,  332,  335],
                    [ 306,  310,  314,  319],
                    [ 295,  293,  304,  308],
                ],
            ]),
            bishop: KingRelativePst([
                [
                    [ 324,  324,  322,  330],
                    [ 311,  313,  314,  322],
                    [ 318,  314,  320,  308],
                    [ 319,  323,  318,  331],
                    [ 318,  323,  331,  324],
                    [ 324,  329,  327,  324],
                    [ 310,  309,  302,  317],
                    [ 303,  317,  310,  313],
                ],
                [
                    [ 306,  321,  320,  323],
                    [ 306,  321,  312,  306],
                    [ 318,  313,  315,  319],
                    [ 316,  316,  322,  326],
                    [ 310,  324,  324,  325],
                    [ 321,  325,  327,  324],
                    [ 315,  315,  312,  317],
                    [ 296,  310,  327,  317],
                ],
            ]),
            rook: KingRelativePst([
                [
                    [ 514,  511,  520,  521],
                    [ 515,  519,  520,  511],
                    [ 511,  506,  511,  504],
                    [ 513,  506,  510,  506],
                    [ 511,  509,  508,  503],
                    [ 503,  497,  498,  499],
                    [ 497,  498,  496,  493],
                    [ 499,  493,  498,  492],
                ],
                [
                    [ 498,  518,  516,  507],
                    [ 482,  500,  501,  509],
                    [ 479,  484,  486,  495],
                    [ 490,  495,  495,  498],
                    [ 495,  495,  499,  499],
                    [ 483,  480,  488,  490],
                    [ 483,  475,  487,  489],
                    [ 482,  495,  497,  487],
                ],
            ]),
            queen: KingRelativePst([
                [
                    [ 932,  925,  937,  927],
                    [ 905,  915,  935,  972],
                    [ 892,  894,  925,  948],
                    [ 903,  907,  918,  941],
                    [ 903,  909,  914,  930],
                    [ 887,  899,  909,  903],
                    [ 875,  890,  884,  885],
                    [ 886,  885,  875,  893],
                ],
                [
                    [ 895,  890,  938,  943],
                    [ 915,  938,  954,  981],
                    [ 918,  907,  948,  951],
                    [ 936,  944,  953,  953],
                    [ 925,  936,  932,  934],
                    [ 903,  922,  917,  913],
                    [ 867,  852,  872,  892],
                    [ 866,  869,  889,  876],
                ],
            ]),
            king: Pst([
                [ -83,  -47,  -30,   -8,  -24,  -16,  -15,  -81],
                [ -23,   15,   19,   21,   33,   40,   28,  -10],
                [ -11,   16,   35,   48,   52,   43,   31,   -4],
                [ -14,   18,   41,   57,   60,   46,   27,    2],
                [ -22,    8,   36,   57,   58,   37,   17,    4],
                [ -29,   -3,   20,   35,   33,   24,    0,   -9],
                [ -47,  -24,   -5,    3,    7,   -4,  -27,  -40],
                [ -75,  -60,  -37,  -23,  -43,  -26,  -55,  -73],
            ]),
        },
        mobility: Mobility {
            pawn: [6, 29, 34, 20, 50],
            knight: [34, 30, 35, 30, 35, 41, 41, 40, 34],
            bishop: [-16, 0, 7, 19, 31, 44, 47, 55, 61, 60, 59, 58, 65, 53],
            rook: [102, 118, 121, 124, 129, 132, 134, 137, 142, 148, 148, 151, 154, 154, 152],
            queen: [7, 45, 152, 187, 196, 201, 211, 234, 242, 246, 256, 262, 271, 278, 284, 289, 292, 304, 311, 312, 310, 313, 311, 317, 296, 301, 301, 303],
            king: [0, -29, -22, -5, -3, 3, 3, 9, 7],
        },
        passed_pawns: KingRelativePst([
            [
                [   0,    0,    0,    0],
                [  98,   92,   73,   62],
                [ 134,  119,  101,   66],
                [  62,   52,   36,   40],
                [  31,   19,   17,   13],
                [   4,   12,    7,   -6],
                [   3,    7,    2,  -15],
                [   0,    0,    0,    0],
            ],
            [
                [   0,    0,    0,    0],
                [ 103,   98,   89,   66],
                [ 169,  149,  133,   95],
                [  92,   84,   68,   47],
                [  53,   49,   35,   25],
                [  12,   13,   10,    6],
                [  11,    2,   -1,   -8],
                [   0,    0,    0,    0],
            ],
        ]),
        bishop_pair: 64,
        rook_on_open_file: 6,
        rook_on_semiopen_file: 3,
        virtual_queen_mobility: [1, 13, 17, 4, 6, 2, 1, 2, 4, 5, 8, 9, 10, 10, 8, 8, 3, 3, -2, -5, -9, -13, -15, -20, -18, -20, -8, -5],
    },
};
