use super::mob::Mobility;
use super::pst::{PstEvalSet, KingRelativePst, Pst};
use super::{Evaluator, EvalTerms};
use super::eval_set::PieceEvalSet;

pub const PIECE_VALUES: PieceEvalSet<i16> = PieceEvalSet {
    pawn: 100,
    knight: 320,
    bishop: 330,
    rook: 500,
    queen: 900,
    king: 0,
};

pub const EVALUATOR: Evaluator = Evaluator {
    midgame: EvalTerms {
        piece_tables: PstEvalSet {
            pawn: KingRelativePst([
                [
                    [   0,    0,    0,    0],
                    [ 117,  120,  118,  120],
                    [  88,  104,  115,  118],
                    [  63,   83,   86,   94],
                    [  55,   80,   83,   98],
                    [  55,   75,   78,   86],
                    [  45,   64,   63,   65],
                    [   0,    0,    0,    0],
                ],
                [
                    [   0,    0,    0,    0],
                    [ 112,  112,  116,  117],
                    [ 109,  119,  128,  119],
                    [ 101,  116,  113,  114],
                    [  94,  113,  108,  106],
                    [ 106,  132,  108,   98],
                    [  84,  133,  106,   78],
                    [   0,    0,    0,    0],
                ],
            ]),
            knight: KingRelativePst([
                [
                    [ 284,  298,  297,  298],
                    [ 295,  296,  302,  302],
                    [ 295,  302,  314,  324],
                    [ 295,  294,  313,  331],
                    [ 285,  298,  306,  305],
                    [ 277,  290,  295,  303],
                    [ 275,  286,  281,  293],
                    [ 292,  274,  279,  287],
                ],
                [
                    [ 290,  299,  298,  300],
                    [ 299,  299,  310,  301],
                    [ 300,  306,  313,  327],
                    [ 306,  303,  333,  318],
                    [ 301,  312,  315,  316],
                    [ 299,  313,  318,  315],
                    [ 286,  287,  294,  294],
                    [ 289,  278,  287,  288],
                ],
            ]),
            bishop: KingRelativePst([
                [
                    [ 294,  297,  297,  296],
                    [ 290,  301,  297,  296],
                    [ 292,  300,  301,  309],
                    [ 291,  290,  305,  321],
                    [ 293,  295,  294,  313],
                    [ 297,  311,  305,  299],
                    [ 299,  301,  306,  291],
                    [ 292,  311,  294,  289],
                ],
                [
                    [ 296,  298,  296,  296],
                    [ 291,  297,  297,  298],
                    [ 301,  306,  309,  305],
                    [ 287,  289,  307,  311],
                    [ 303,  297,  301,  314],
                    [ 317,  319,  318,  304],
                    [ 298,  320,  311,  300],
                    [ 295,  301,  285,  294],
                ],
            ]),
            rook: KingRelativePst([
                [
                    [ 500,  500,  501,  500],
                    [ 493,  492,  501,  505],
                    [ 486,  496,  491,  494],
                    [ 485,  488,  485,  488],
                    [ 477,  481,  481,  481],
                    [ 469,  477,  476,  477],
                    [ 463,  474,  479,  480],
                    [ 480,  481,  484,  491],
                ],
                [
                    [ 503,  501,  502,  500],
                    [ 504,  504,  507,  500],
                    [ 500,  502,  501,  500],
                    [ 497,  496,  495,  485],
                    [ 492,  498,  484,  482],
                    [ 499,  510,  491,  482],
                    [ 485,  499,  488,  485],
                    [ 473,  486,  491,  497],
                ],
            ]),
            queen: KingRelativePst([
                [
                    [ 895,  899,  903,  904],
                    [ 893,  885,  899,  902],
                    [ 896,  895,  898,  905],
                    [ 891,  889,  897,  899],
                    [ 892,  892,  892,  896],
                    [ 899,  903,  901,  895],
                    [ 894,  895,  900,  905],
                    [ 893,  888,  894,  903],
                ],
                [
                    [ 898,  901,  904,  904],
                    [ 910,  899,  908,  904],
                    [ 919,  914,  913,  912],
                    [ 906,  904,  907,  904],
                    [ 913,  913,  906,  903],
                    [ 911,  924,  920,  900],
                    [ 893,  897,  907,  905],
                    [ 895,  892,  888,  897],
                ],
            ]),
            king: Pst([
                [  -1,   -1,    0,    0,    0,    0,    1,    0],
                [  -1,    0,    0,    1,    1,    1,    1,    0],
                [   0,    2,    2,    2,    3,    4,    3,    1],
                [  -1,    0,    2,    1,    0,    2,    0,   -1],
                [  -2,   -2,   -2,   -4,   -5,   -3,   -5,   -6],
                [  -3,    2,   -5,  -11,  -12,  -12,   -2,  -12],
                [   5,    6,    0,  -13,  -17,   -6,   34,   18],
                [  -4,   30,   10,  -36,    4,  -29,   32,   25],
            ]),
        },
        mobility: Mobility {
            pawn: [ -15, -8, 3, 23, 0],
            knight: [ -12, -14, -1, 6, 13, 14, 16, 17, 23],
            bishop: [ -23, -12, -3, 1, 8, 15, 21, 25, 26, 28, 30, 30, 9, 5],
            rook: [ -62, -50, -46, -42, -43, -38, -35, -31, -28, -26, -23, -19, -16, -5, -12],
            queen: [ -1, -6, -15, -14, -12, -10, -5, -5, -2, 0, 2, 3, 4, 5, 8, 8, 12, 13, 17, 20, 25, 24, 19, 16, 8, 6, 1, 1],
            king: [ 8, 28, 23, 14, 3, -11, -21, -32, -13],
        },
        passed_pawns: KingRelativePst([
            [
                [   0,    0,    0,    0],
                [  17,   20,   18,   20],
                [  16,   21,   26,   20],
                [  17,   17,   24,   19],
                [  10,    2,   -6,   -4],
                [  -4,   -7,  -10,  -10],
                [  -8,   -4,   -5,   -5],
                [   0,    0,    0,    0],
            ],
            [
                [   0,    0,    0,    0],
                [  12,   12,   17,   18],
                [   8,   13,   21,   21],
                [   3,    7,   14,    7],
                [  -5,    5,    1,   -6],
                [   1,    2,   -6,   -6],
                [  -7,    8,    4,   -2],
                [   0,    0,    0,    0],
            ],
        ]),
        bishop_pair: 31,
        rook_on_open_file: 23,
        rook_on_semiopen_file: 8,
    },
    endgame: EvalTerms {
        piece_tables: PstEvalSet {
            pawn: KingRelativePst([
                [
                    [   0,    0,    0,    0],
                    [ 150,  142,  137,  136],
                    [ 126,  130,  116,  119],
                    [  96,   95,   80,   75],
                    [  84,   90,   78,   77],
                    [  82,   87,   76,   83],
                    [  89,   91,   82,   87],
                    [   0,    0,    0,    0],
                ],
                [
                    [   0,    0,    0,    0],
                    [ 157,  145,  145,  134],
                    [ 137,  146,  121,  118],
                    [  89,   92,   75,   72],
                    [  74,   83,   71,   76],
                    [  69,   79,   78,   82],
                    [  71,   78,   84,   99],
                    [   0,    0,    0,    0],
                ],
            ]),
            knight: KingRelativePst([
                [
                    [ 285,  297,  297,  297],
                    [ 295,  298,  296,  298],
                    [ 297,  296,  302,  305],
                    [ 299,  300,  306,  310],
                    [ 302,  298,  306,  307],
                    [ 296,  293,  295,  302],
                    [ 293,  294,  292,  290],
                    [ 293,  285,  288,  294],
                ],
                [
                    [ 288,  296,  295,  298],
                    [ 294,  296,  296,  296],
                    [ 295,  295,  298,  304],
                    [ 300,  300,  305,  306],
                    [ 301,  301,  302,  308],
                    [ 300,  295,  293,  300],
                    [ 296,  296,  294,  296],
                    [ 295,  292,  295,  298],
                ],
            ]),
            bishop: KingRelativePst([
                [
                    [ 297,  297,  295,  297],
                    [ 289,  295,  294,  295],
                    [ 295,  295,  299,  296],
                    [ 294,  300,  299,  308],
                    [ 296,  299,  306,  302],
                    [ 300,  302,  302,  301],
                    [ 294,  289,  286,  298],
                    [ 290,  296,  289,  291],
                ],
                [
                    [ 294,  296,  295,  296],
                    [ 289,  296,  293,  293],
                    [ 298,  298,  300,  300],
                    [ 294,  297,  302,  304],
                    [ 295,  301,  301,  303],
                    [ 302,  300,  304,  303],
                    [ 296,  294,  297,  296],
                    [ 293,  296,  306,  295],
                ],
            ]),
            rook: KingRelativePst([
                [
                    [ 508,  505,  508,  507],
                    [ 504,  506,  511,  509],
                    [ 498,  499,  499,  496],
                    [ 497,  494,  498,  495],
                    [ 493,  493,  493,  492],
                    [ 491,  489,  489,  490],
                    [ 489,  491,  491,  490],
                    [ 491,  490,  493,  487],
                ],
                [
                    [ 506,  508,  508,  503],
                    [ 497,  506,  507,  504],
                    [ 491,  499,  494,  495],
                    [ 492,  493,  494,  490],
                    [ 493,  496,  492,  491],
                    [ 493,  495,  489,  488],
                    [ 489,  491,  490,  487],
                    [ 487,  494,  491,  483],
                ],
            ]),
            queen: KingRelativePst([
                [
                    [ 899,  900,  904,  904],
                    [ 897,  899,  902,  906],
                    [ 896,  897,  903,  909],
                    [ 897,  900,  902,  908],
                    [ 899,  901,  901,  906],
                    [ 898,  899,  902,  903],
                    [ 896,  899,  893,  895],
                    [ 897,  897,  899,  898],
                ],
                [
                    [ 898,  900,  903,  905],
                    [ 904,  903,  908,  908],
                    [ 905,  904,  911,  911],
                    [ 905,  907,  911,  912],
                    [ 904,  909,  908,  907],
                    [ 902,  906,  905,  906],
                    [ 896,  894,  894,  897],
                    [ 897,  896,  896,  898],
                ],
            ]),
            king: Pst([
                [  -4,   -3,   -1,    1,   -1,    0,    2,   -2],
                [  -2,    1,    2,    3,    5,    6,    4,    1],
                [   1,    6,   12,   16,   18,   18,   11,    4],
                [   0,    4,   16,   21,   22,   19,    7,    3],
                [  -6,   -4,   10,   19,   20,    9,   -2,   -2],
                [  -8,   -5,   -1,    8,    7,    5,   -4,   -1],
                [  -7,  -15,  -10,   -6,   -3,   -6,  -20,  -12],
                [ -17,  -23,  -12,  -15,  -23,   -6,  -24,  -37],
            ]),
        },
        mobility: Mobility {
            pawn: [ 0, 19, 19, 12, 0],
            knight: [ -3, -16, -34, -30, -21, -5, -3, 4, -2],
            bishop: [ -19, -26, -30, -23, -14, -2, 1, 5, 12, 10, 11, 12, 11, 7],
            rook: [ -32, -29, -27, -22, -15, -13, -11, -7, -3, 2, 4, 5, 7, 4, 7],
            queen: [ 0, -1, -3, -4, -7, -10, -12, -10, -9, -9, -5, -2, 4, 8, 13, 16, 18, 24, 28, 28, 29, 30, 22, 21, 10, 9, 2, 2],
            king: [ 0, -30, -26, -12, -3, 6, 22, 26, 17],
        },
        passed_pawns: KingRelativePst([
            [
                [   0,    0,    0,    0],
                [  51,   43,   38,   36],
                [  54,   48,   36,   23],
                [  36,   30,   20,   21],
                [  15,    5,    2,    1],
                [  -8,   -2,   -7,  -15],
                [  -8,   -3,   -8,   -5],
                [   0,    0,    0,    0],
            ],
            [
                [   0,    0,    0,    0],
                [  58,   46,   45,   35],
                [  58,   55,   45,   26],
                [  43,   43,   39,   27],
                [  24,   26,   18,   10],
                [  -9,    1,   -7,   -6],
                [ -11,   -5,  -12,   -4],
                [   0,    0,    0,    0],
            ],
        ]),
        bishop_pair: 45,
        rook_on_open_file: 8,
        rook_on_semiopen_file: 1,
    },
};
