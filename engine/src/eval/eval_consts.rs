use super::mob::Mobility;
use super::pst::{PstEvalSet, KingRelativePst, Pst};
use super::{Evaluator, EvalTerms};
use super::eval_set::PieceEvalSet;

pub const PIECE_VALUES: PieceEvalSet<i16> = PieceEvalSet {
    pawn: 100,
    knight: 320,
    bishop: 330,
    rook: 500,
    queen: 900,
    king: 0,
};

pub const EVALUATOR: Evaluator = Evaluator {
    midgame: EvalTerms {
        piece_tables: PstEvalSet {
            pawn: KingRelativePst([
                [
                    [   0,    0,    0,    0],
                    [  99,  113,  125,  138],
                    [  68,   88,  114,  117],
                    [  55,   81,   85,   93],
                    [  51,   80,   84,   98],
                    [  51,   74,   76,   88],
                    [  42,   64,   63,   65],
                    [   0,    0,    0,    0],
                ],
                [
                    [   0,    0,    0,    0],
                    [  85,   98,  124,  138],
                    [ 128,  159,  157,  129],
                    [ 108,  120,  117,  114],
                    [  99,  116,  111,  106],
                    [ 110,  133,  108,   96],
                    [  89,  134,  104,   76],
                    [   0,    0,    0,    0],
                ],
            ]),
            knight: KingRelativePst([
                [
                    [ 178,  259,  269,  295],
                    [ 308,  320,  350,  369],
                    [ 309,  347,  376,  384],
                    [ 318,  332,  356,  373],
                    [ 313,  333,  345,  345],
                    [ 306,  325,  332,  340],
                    [ 284,  299,  312,  324],
                    [ 250,  300,  290,  303],
                ],
                [
                    [ 212,  285,  283,  334],
                    [ 328,  332,  400,  351],
                    [ 340,  366,  410,  415],
                    [ 344,  341,  383,  361],
                    [ 329,  353,  355,  354],
                    [ 325,  348,  353,  351],
                    [ 309,  306,  324,  325],
                    [ 265,  303,  309,  311],
                ],
            ]),
            bishop: KingRelativePst([
                [
                    [ 311,  300,  277,  263],
                    [ 322,  351,  339,  312],
                    [ 330,  347,  350,  366],
                    [ 323,  334,  352,  367],
                    [ 335,  336,  338,  357],
                    [ 342,  355,  347,  343],
                    [ 344,  346,  351,  335],
                    [ 332,  354,  338,  329],
                ],
                [
                    [ 297,  310,  283,  278],
                    [ 315,  325,  339,  345],
                    [ 344,  363,  376,  360],
                    [ 323,  334,  354,  356],
                    [ 349,  341,  345,  356],
                    [ 366,  363,  362,  348],
                    [ 340,  365,  354,  344],
                    [ 340,  345,  326,  335],
                ],
            ]),
            rook: KingRelativePst([
                [
                    [ 505,  508,  501,  497],
                    [ 491,  489,  507,  526],
                    [ 471,  493,  486,  493],
                    [ 466,  476,  476,  483],
                    [ 458,  460,  466,  470],
                    [ 463,  471,  470,  472],
                    [ 461,  470,  480,  481],
                    [ 485,  485,  486,  493],
                ],
                [
                    [ 547,  500,  520,  521],
                    [ 564,  547,  550,  513],
                    [ 537,  560,  529,  518],
                    [ 505,  498,  501,  484],
                    [ 489,  507,  482,  478],
                    [ 514,  531,  499,  485],
                    [ 485,  515,  494,  488],
                    [ 489,  491,  493,  497],
                ],
            ]),
            queen: KingRelativePst([
                [
                    [ 861,  868,  888,  916],
                    [ 894,  879,  885,  867],
                    [ 899,  895,  890,  895],
                    [ 887,  884,  890,  886],
                    [ 896,  892,  890,  889],
                    [ 908,  907,  901,  897],
                    [ 902,  901,  907,  909],
                    [ 893,  894,  901,  907],
                ],
                [
                    [ 905,  941,  920,  906],
                    [ 932,  890,  909,  873],
                    [ 927,  938,  915,  909],
                    [ 903,  896,  894,  885],
                    [ 914,  909,  900,  895],
                    [ 921,  923,  919,  897],
                    [ 899,  915,  913,  908],
                    [ 888,  883,  884,  903],
                ],
            ]),
            king: Pst([
                [ -10,    6,   12,   -8,   -3,    5,    9,   -2],
                [ -19,   13,    1,   37,   14,   18,   27,    8],
                [ -27,   45,   13,   -2,    9,   54,   40,    9],
                [ -25,  -13,  -18,  -63,  -74,  -33,  -29,  -68],
                [ -35,  -14,  -47,  -94,  -90,  -48,  -43,  -93],
                [   1,   36,  -20,  -44,  -39,  -23,   19,  -18],
                [  61,   59,   30,    8,    3,   22,   65,   53],
                [  53,   74,   51,  -23,   35,    4,   68,   63],
            ]),
        },
        mobility: Mobility {
            pawn: [-17, -9, -1, 27, 0],
            knight: [-63, -47, -41, -38, -36, -37, -37, -37, -35],
            bishop: [-64, -58, -52, -48, -42, -35, -30, -27, -25, -23, -21, -18, -12, 4],
            rook: [-130, -121, -118, -114, -115, -110, -107, -104, -103, -101, -99, -97, -97, -87, -90],
            queen: [-38, -43, -51, -51, -50, -47, -44, -46, -45, -43, -42, -42, -42, -40, -39, -39, -35, -38, -37, -34, -23, -22, -16, -13, 12, 31, 3, 9],
            king: [6, -8, -10, -16, -21, -35, -34, -48, -51],
        },
        passed_pawns: KingRelativePst([
            [
                [   0,    0,    0,    0],
                [   6,   25,   25,   34],
                [  23,   41,   32,   18],
                [  30,   22,   29,   17],
                [  18,    2,  -10,   -6],
                [   4,  -15,  -16,  -16],
                [   1,   -4,   -7,  -13],
                [   0,    0,    0,    0],
            ],
            [
                [   0,    0,    0,    0],
                [ -35,  -11,   15,   33],
                [ -65,  -41,    4,   15],
                [ -38,  -19,    9,    0],
                [ -35,  -14,  -16,  -14],
                [ -12,   -2,  -26,  -16],
                [ -21,   12,   -1,   -3],
                [   0,    0,    0,    0],
            ],
        ]),
        bishop_pair: 19,
        rook_on_open_file: 32,
        rook_on_semiopen_file: 12,
        virtual_queen_mobility: [4, 32, 25, 23, 20, 21, 19, 15, 13, 7, 2, -4, -10, -17, -21, -21, -24, -20, -18, -12, -9, -9, -8, -4, -4, -3, -2, 0],
        backwards_pawns: [-1, -12, -15, -21, -23, -14, -10, 4],
    },
    endgame: EvalTerms {
        piece_tables: PstEvalSet {
            pawn: KingRelativePst([
                [
                    [   0,    0,    0,    0],
                    [ 191,  180,  172,  166],
                    [ 102,  108,   86,  103],
                    [  94,   96,   83,   77],
                    [  84,   92,   82,   82],
                    [  81,   90,   80,   88],
                    [  81,   89,   80,   88],
                    [   0,    0,    0,    0],
                ],
                [
                    [   0,    0,    0,    0],
                    [ 223,  206,  199,  171],
                    [  93,  106,   74,   78],
                    [  78,   87,   73,   72],
                    [  71,   84,   74,   79],
                    [  64,   79,   78,   87],
                    [  59,   72,   78,   96],
                    [   0,    0,    0,    0],
                ],
            ]),
            knight: KingRelativePst([
                [
                    [ 248,  296,  310,  312],
                    [ 303,  321,  318,  313],
                    [ 310,  315,  335,  339],
                    [ 320,  329,  347,  352],
                    [ 324,  327,  348,  346],
                    [ 313,  323,  334,  339],
                    [ 297,  304,  317,  315],
                    [ 282,  285,  300,  304],
                ],
                [
                    [ 216,  266,  287,  299],
                    [ 284,  304,  296,  312],
                    [ 292,  305,  313,  326],
                    [ 307,  327,  338,  346],
                    [ 317,  324,  340,  348],
                    [ 313,  322,  331,  335],
                    [ 306,  310,  314,  318],
                    [ 295,  293,  304,  308],
                ],
            ]),
            bishop: KingRelativePst([
                [
                    [ 324,  324,  322,  330],
                    [ 311,  313,  314,  322],
                    [ 318,  314,  320,  308],
                    [ 319,  323,  318,  331],
                    [ 318,  323,  331,  323],
                    [ 324,  328,  326,  323],
                    [ 310,  308,  303,  317],
                    [ 303,  317,  310,  313],
                ],
                [
                    [ 306,  321,  320,  323],
                    [ 306,  321,  312,  306],
                    [ 318,  313,  315,  319],
                    [ 316,  316,  322,  325],
                    [ 310,  324,  323,  324],
                    [ 321,  324,  326,  323],
                    [ 315,  314,  312,  315],
                    [ 296,  310,  327,  317],
                ],
            ]),
            rook: KingRelativePst([
                [
                    [ 514,  511,  520,  521],
                    [ 515,  519,  519,  511],
                    [ 511,  506,  510,  504],
                    [ 513,  506,  510,  505],
                    [ 510,  509,  508,  503],
                    [ 503,  497,  498,  498],
                    [ 496,  498,  496,  493],
                    [ 498,  493,  498,  492],
                ],
                [
                    [ 498,  518,  516,  507],
                    [ 482,  500,  501,  509],
                    [ 479,  484,  486,  495],
                    [ 490,  495,  495,  497],
                    [ 495,  495,  499,  499],
                    [ 482,  479,  487,  489],
                    [ 482,  474,  486,  489],
                    [ 482,  494,  496,  488],
                ],
            ]),
            queen: KingRelativePst([
                [
                    [ 932,  925,  937,  927],
                    [ 905,  915,  935,  972],
                    [ 892,  894,  925,  948],
                    [ 903,  907,  918,  941],
                    [ 903,  909,  914,  929],
                    [ 887,  899,  909,  903],
                    [ 875,  890,  884,  885],
                    [ 886,  885,  875,  892],
                ],
                [
                    [ 895,  890,  938,  943],
                    [ 915,  938,  954,  981],
                    [ 918,  907,  948,  951],
                    [ 936,  944,  953,  953],
                    [ 925,  936,  932,  934],
                    [ 903,  922,  917,  913],
                    [ 867,  852,  871,  892],
                    [ 866,  869,  889,  876],
                ],
            ]),
            king: Pst([
                [ -83,  -47,  -30,   -8,  -24,  -16,  -15,  -81],
                [ -23,   14,   19,   21,   33,   40,   27,  -10],
                [ -11,   15,   36,   49,   53,   43,   30,   -5],
                [ -14,   18,   42,   59,   62,   47,   26,    2],
                [ -22,    7,   37,   58,   59,   37,   16,    3],
                [ -29,   -4,   20,   35,   33,   24,   -1,  -10],
                [ -47,  -25,   -6,    2,    6,   -4,  -26,  -40],
                [ -75,  -60,  -38,  -22,  -42,  -25,  -53,  -72],
            ]),
        },
        mobility: Mobility {
            pawn: [2, 24, 28, 19, 50],
            knight: [34, 30, 34, 30, 35, 40, 39, 39, 33],
            bishop: [-16, 0, 8, 19, 30, 43, 46, 53, 59, 58, 58, 57, 65, 52],
            rook: [101, 117, 119, 123, 128, 130, 133, 136, 142, 146, 148, 151, 154, 154, 153],
            queen: [7, 45, 152, 187, 196, 201, 211, 234, 242, 246, 256, 262, 271, 277, 283, 289, 291, 304, 311, 312, 310, 313, 311, 317, 296, 301, 301, 303],
            king: [0, -32, -23, -5, -1, 5, 4, 9, 7],
        },
        passed_pawns: KingRelativePst([
            [
                [   0,    0,    0,    0],
                [  98,   92,   73,   63],
                [ 134,  119,  101,   67],
                [  64,   52,   37,   40],
                [  31,   19,   18,   12],
                [   4,   12,    7,   -7],
                [   4,    7,    3,  -15],
                [   0,    0,    0,    0],
            ],
            [
                [   0,    0,    0,    0],
                [ 103,   98,   89,   66],
                [ 169,  149,  133,   96],
                [  93,   84,   69,   48],
                [  53,   49,   36,   24],
                [  13,   14,   11,    6],
                [  12,    3,    1,   -8],
                [   0,    0,    0,    0],
            ],
        ]),
        bishop_pair: 63,
        rook_on_open_file: 4,
        rook_on_semiopen_file: 2,
        virtual_queen_mobility: [1, 16, 19, 6, 8, 4, 3, 3, 5, 6, 8, 10, 11, 11, 10, 9, 4, 3, -1, -6, -10, -14, -17, -23, -23, -26, -12, -8],
        backwards_pawns: [-10, -19, -15, -18, -17, -10, -12, -5],
    },
};
